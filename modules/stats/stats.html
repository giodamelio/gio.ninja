<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stats</title>

        <!-- Foundation -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.3/css/normalize.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.2.3/css/foundation.min.css">

    <style>
        .row {
            max-width: none;
        }
    </style>

    <!-- Keen.io script -->
    <script type="text/javascript">
        var Keen=Keen||{configure:function(e){this._cf=e},addEvent:function(e,t,n,i){this._eq=this._eq||[],this._eq.push([e,t,n,i])},setGlobalProperties:function(e){this._gp=e},onChartsReady:function(e){this._ocrq=this._ocrq||[],this._ocrq.push(e)}};(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://":"http://")+"dc8na2hxrj29i.cloudfront.net/code/keen-2.1.2-min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();

        Keen.configure({
            projectId: "{{projectId}}",
            readKey: "{{readKey}}"        
        });
    </script>

    <!-- My Metrics -->
    <script type="text/javascript">
        Keen.onChartsReady(function() {
            // Total page views
            var totalViews = new Keen.Metric("pageview", {
                analysisType: "count"
            });
            var totalViewNumber = new Keen.Number(totalViews, {
                label: "Total Page Views"
            });
            totalViewNumber.draw(document.getElementById("totalViews"));

            // Unique Visitors
            var uniqueVisitors = new Keen.Metric("pageview", {
                analysisType: "count_unique",
                targetProperty: "ip"
            });
            var uniqueVisitorsNumber = new Keen.Number(uniqueVisitors, {
                label: "Unique Visitors"
            });
            uniqueVisitorsNumber.draw(document.getElementById("uniqueVisitors"));

            // Views by Subdomain
            var viewsBySubdomain = new Keen.Metric("pageview", {
                analysisType: "count",
                groupBy: "subdomain",
                filters: [{"property_name":"subdomain","operator":"ne","property_value":"list"},{"property_name":"subdomain","operator":"exists","property_value":true}]
            });
            var viewsBySubdomainPieChart = new Keen.PieChart(viewsBySubdomain, {
                title: "Views by Subdomain"
            });
            viewsBySubdomainPieChart.draw(document.getElementById("viewsBySubdomain"));

            // Views by Content Type
            var viewsByContentType = new Keen.Metric("pageview", {
                analysisType: "count",
                groupBy: "content-type",
                filters: [{"property_name":"content-type","operator":"ne","property_value":"script/javascript"}]
            });
            var viewsByContentTypePieChart = new Keen.PieChart(viewsByContentType, {
                    title: "Views by Content Type"
            });
            viewsByContentTypePieChart.draw(document.getElementById("viewsByContentType"));
        });
    </script>
</head>
<body>
    <div class="row">
        <div class="large-3 columns">
            <div id="totalViews"></div>
        </div>
        <div class="large-3 columns">
            <div id="uniqueVisitors"></div>
        </div>
        <div class="large-3 columns">
        
        </div>
        <div class="large-3 columns">
        
        </div>
        <div class="large-3 columns">
        
        </div>
    </div>
    <div class="row">
        <div class="large-5 large-offset-1 columns">
            <div id="viewsBySubdomain"></div>
        </div>
        <div class="large-5 columns end">
            <div id="viewsByContentType"></div>
        </div>
    </div>
</body>
</html>
